(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{3805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var l=r(7876),s=r(4232);let d=e=>{let{onResults:t}=e,r=(0,s.useRef)(null),[d,i]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),a=async e=>{var r;c(null);let l=null==(r=e.target.files)?void 0:r[0];if(!l)return;if(!l.name.toLowerCase().endsWith(".fit"))return void c("Пожалуйста, выберите FIT-файл.");let s=new FormData;s.append("file",l),i(!0);try{let e=await fetch("/api/upload",{method:"POST",body:s});if(!e.ok)throw Error("Ошибка загрузки файла");let r=await e.json();t(r)}catch(e){c(e.message||"Ошибка загрузки")}finally{i(!1)}};return(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",accept:".fit",ref:r,onChange:a,disabled:d}),d&&(0,l.jsx)("div",{children:"Загрузка..."}),n&&(0,l.jsx)("div",{style:{color:"red"},children:n})]})},i=e=>{let{results:t}=e;if(!t)return null;if(Array.isArray(t)){if(0===t.length)return(0,l.jsx)("div",{children:"Нет данных для отображения."});let e=Object.keys(t[0]);return(0,l.jsxs)("table",{style:{borderCollapse:"collapse",width:"100%"},children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:e.map(e=>(0,l.jsx)("th",{style:{border:"1px solid #ccc",padding:"4px",background:"#f5f5f5"},children:e},e))})}),(0,l.jsx)("tbody",{children:t.map((t,r)=>(0,l.jsx)("tr",{children:e.map(e=>(0,l.jsx)("td",{style:{border:"1px solid #ccc",padding:"4px"},children:String(t[e])},e))},r))})]})}return"object"==typeof t?(0,l.jsx)("table",{style:{borderCollapse:"collapse",width:"100%"},children:(0,l.jsx)("tbody",{children:Object.entries(t).map(e=>{let[t,r]=e;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:{border:"1px solid #ccc",padding:"4px",fontWeight:"bold",background:"#f5f5f5"},children:t}),(0,l.jsx)("td",{style:{border:"1px solid #ccc",padding:"4px"},children:"object"==typeof r?JSON.stringify(r,null,2):String(r)})]},t)})})}):(0,l.jsx)("pre",{children:String(t)})},n=()=>{let[e,t]=(0,s.useState)(null);return(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"FIT File Analyzer"}),(0,l.jsx)(d,{onResults:e=>{t(e)}}),e&&(0,l.jsx)(i,{results:e})]})}},6760:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3805)}])}},e=>{e.O(0,[636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);